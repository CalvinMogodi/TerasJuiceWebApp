<app-nav [heading]="heading" [headingIcon]="headingIcon"></app-nav>
<div class="container page">
    <div *ngIf="notification.meaagse != ''" style="margin-top: 12px;margin-right: -236px;">
        <button type="button" class="close" data-dismiss="modal" style="margin-right: -15px !important;" (click)="closeNotification()"
            aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
            <p [ngClass]="{'red':!notification.isSuccessful, 'green': notification.isSuccessful}">
                {{notification.meaagse}}
            </p>
    </div>


    <div class="calendar-col text-center" style="margin-left: 15px;margin-right: -230px;">
        <div class="panel panel-primary">
            <div class="panel-body">
                <span class="pendingApprovel-barge"></span>
                <span class="pendingApprovel-bargeHeader">Awaiting Approvel</span>
                <table class="table table-striped table-scroll">
                    <thead>
                        <tr class="pendingApprovel-header">
                            <th>Order #</th>
                            <th>Cost/ Quantity</th>
                            <th>Order Date</th>
                            <th>User</th>
                            <th>Delivery Method</th>
                            <th>Payment Method</th>
                            <th>Proof Of Payment</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor='let order of awaitingApprovalOrders; let i = index; trackBy: trackByIndex' style="font-size: 12px;">
                            <td style="text-align: start;"></td>
                            <td style="text-align: start;"><b>{{order.cost | currency:'ZAR':true}} </b>&nbsp; ({{order.quantity}})</td>
                            <td style="text-align: center;">{{order.createdDate}}</td>
                            <td style="text-align: center;">{{order.user}}</td>
                            <td style="text-align: center;" class="text-overflow">{{order.deliveryMethod}}</td>
                            <td style="text-align: center;">{{order.paymentMethod}}</td>
                            <td style="text-align: center;">
                                <i *ngIf="!order.uploadedPOP" class="fa fa-file-pdf-o fa-icon"></i>
                                <i *ngIf="order.uploadedPOP" style="color: red" class="fa fa-file-pdf-o fa-icon"></i>
                            </td>
                            <td style="text-align: start;">
                                <button type="button" [disabled]="order.uploadedPOP" (click)="approveOrder(order)" class="btn btn-success">
                                    Approve
                                </button>
                            </td>
                        </tr>
                        <tr *ngIf='awaitingApprovalOrders.length == 0'>
                            <td style="text-align: center;font-weight: bold;" *ngIf="!loading">No Awaiting Approvel Order(s)</td>
                             <td style="text-align: center;font-weight: bold;" *ngIf="loading">
                                        <div class="text-center">
                                        <div class="loader" ></div> 
                                        <span>Loading Order(s)...</span>
                                    </div>   
                                    </td>      
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="calendar-col text-center" *ngIf="this.currentUser.userType == 'Manager' || this.currentUser.userType == 'Admin'">
            <div class="panel panel-primary">
                <div class="panel-body">
                    <span class="pendingApprovel-barge"></span>
                    <span class="pendingApprovel-bargeHeader">Awaiting Final Approval</span>
                    <table class="table table-striped table-scroll">
                        <thead>
                            <tr class="pendingApprovel-header">
                                <th>Order #</th>
                                <th>Cost/ Quantity</th>
                                <th>Order Date</th>
                                <th>User</th>
                                <th>Delivery Method</th>
                                <th>Payment Method</th>
                                <th>Proof Of Payment</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor='let order of awaitingFinalApprovalOrders' style="font-size: 12px;">
                                <td style="text-align: start;"></td>
                                <td style="text-align: start;"><b>{{order.cost | currency:'ZAR':true}} </b>&nbsp; ({{order.quantity}})</td>
                                <td style="text-align: center;">{{order.createdDate}}</td>
                                <td style="text-align: center;">{{order.user}}</td>
                                <td style="text-align: center;" class="text-overflow">{{order.deliveryMethod}}</td>
                                <td style="text-align: center;">{{order.paymentMethod}}</td>
                                <td style="text-align: center;">
                                    <i *ngIf="!order.uploadedPOP" class="fa fa-file-pdf-o fa-icon"></i>
                                    <i *ngIf="order.uploadedPOP" style="color: red" class="fa fa-file-pdf-o fa-icon"></i>
                                </td>
                                <td style="text-align: start;">
                                    <button type="button" [disabled]="order.uploadedPOP" (click)="approveOrder(order)" class="btn btn-success">
                                    Approve
                                </button>
                                </td>
                            </tr>
                            <tr *ngIf='awaitingFinalApprovalOrders.length == 0'>
                                <td style="text-align: center;font-weight: bold;" *ngIf="!loading">No Awaiting Final Approval(s)</td>
                                <td style="text-align: center;font-weight: bold;" *ngIf="loading">
                                        <div class="text-center">
                                        <div class="loader" ></div> 
                                        <span>Loading Order(s)...</span>
                                    </div>   
                                    </td>  
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>